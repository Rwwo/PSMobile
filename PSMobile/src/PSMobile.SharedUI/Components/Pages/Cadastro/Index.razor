@page "/cadastro"
@inherits IndexCadastroPage

<PsTitle Title="Clientes" />

<MudContainer Class="mt-4 px-4">
    @* <MudText Typo="Typo.h4" Class="mb-4">Cadastros</MudText> *@

    <PsPageHeader Icon="@Icons.Material.Filled.PeopleAlt"
                  Title="Clientes"
                  ButtonTextBack="Voltar" OnClickGoBack="@GoToHomePage"
                  ButtonText="Novo Cliente" OnClick="@GoToAddPedido" />


    <MudContainer Class="mt-2 px-0 mb-4">

        <MudGrid>
            <MudItem xs="12">
                <MudDataGrid @ref="dataGrid"
                             T="Cadastros"
                             ServerData="ServerReload"
                             Striped="IsStriped"
                             Hover="IsHover"
                             Dense="IsDense"
                             Bordered="IsBordered"
                             Filterable="false">

                    <ToolBarContent>
                        <MudText Typo="Typo.h6">Clientes</MudText>
                        <MudSpacer />
                        <MudTextField T="string" ValueChanged="@(s=>OnSearch(s))" Placeholder="Search" Adornment="Adornment.Start"
                                      AdornmentIcon="@Icons.Material.Filled.Search" IconSize="Size.Medium" Class="mt-0"></MudTextField>
                    </ToolBarContent>

                    <Columns>
                        <PropertyColumn Property="x => x.cad_nome" Title="Nome Cadastro" />
                        <PropertyColumn Property="x => x.cad_razao" Title="Razão Social" />
                        <TemplateColumn>
                            <CellTemplate>
                                <MudStack Row Class="gap-2">
                                    <EditButton Disabled="false" OnClick="@(() => GoToUpdate(context.Item))" />
                                </MudStack>
                            </CellTemplate>
                        </TemplateColumn>
                    </Columns>
                    <PagerContent>
                        <MudDataGridPager PageSizeOptions="@PageSizeOptionsString"
                                          RowsPerPageString="@RowsPerPageString"
                                          InfoFormat="@InfoFormatString"
                                          T="Cadastros" />
                    </PagerContent>
                </MudDataGrid>
            </MudItem>
        </MudGrid>

    </MudContainer>
</MudContainer>